<!DOCTYPE html>
<html lang="en">
<head>
<title>Faheem Tracker - All in One Power</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #1b1b1b !important; color: #FFF; font-family: 'Roboto', sans-serif; }
  header { background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(63,63,63,1) 90%, rgba(27,27,27,1) 97%); color: white; text-align: center; animation: headerGlow 2s ease-in-out infinite alternate; padding: 16px; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; }
  @keyframes headerGlow { from { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #ff0; } to { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #ff0; } }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
  .container { max-width: 1200px; margin: 90px auto 20px; padding: 20px; }
  .service-button { display: inline-block; margin: 10px; padding: 20px; background: linear-gradient(45deg, #333, #555); color: #FFF; border: none; cursor: pointer; border-radius: 10px; transition: all 0.4s ease; animation: fadeInUp 0.5s ease forwards; opacity: 0; box-shadow: 0 4px 8px rgba(0,0,0,0.3); position: relative; overflow: hidden; text-align: center; min-width: 200px; font-size: 16px; font-weight: 500; }
  .service-button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); transition: left 0.5s; }
  .service-button:hover::before { left: 100%; }
  .service-button:hover { background: linear-gradient(45deg, #555, #777); transform: scale(1.05) rotate(1deg); box-shadow: 0 8px 16px rgba(0,0,0,0.5); }
  #buttons-container { display: none; }
  #search-container, #fir-copy-container, #sim-pic-container { display: none; max-width: 900px; margin: 90px auto; padding: 20px; background: #2b2b2b; border-radius: 10px; }
  #back-link, #logout-link { display: none; }
  .result-area { background: white; padding: 10px; border-radius: 5px; margin-top: 20px; }
  #login-container { display: block; text-align: center; margin-top: 150px; }
  #login-form { background: #333; padding: 30px; border-radius: 10px; width: 350px; margin: 0 auto; }
  #login-form input { width: 100%; margin-bottom: 15px; padding: 12px; border: none; border-radius: 5px; background: #555; color: white; font-size: 14px; }
  #login-form button { width: 100%; padding: 12px; background: #555; color: #FFF; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: 500; }
  #login-form button:hover { background: #777; }
  select, input[type="text"] { background: #333; color: white; border: 1px solid #555; border-radius: 8px; padding: 10px; width: 100%; margin-bottom: 10px; }
  .submit-btn { background: #ffcc00; color: black; border: none; border-radius: 8px; padding: 12px; font-weight: bold; cursor: pointer; width: 100%; font-size: 16px; }
  .submit-btn:hover { background: #e6b800; }
  #overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 9999; }
  #loader { border: 8px solid #333; border-top: 8px solid #ffcc00; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; }
  #pdfLinkBox { display: none; margin-top: 20px; }
  #pdfLink { background: #4CAF50; color: white; padding: 12px 20px; border-radius: 8px; text-decoration: none; display: inline-block; }
  .w3-button { padding: 8px 16px; background: #555; color: white; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; }
  .w3-button:hover { background: #777; }
  .w3-red { background: #f44336 !important; }
  .w3-red:hover { background: #da190b !important; }
  .w3-black { background: #000 !important; }
  .w3-black:hover { background: #333 !important; }
  .w3-right { float: right; margin-left: 10px; }
  .w3-row-padding { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
  .w3-half { width: 48%; display: inline-block; margin-right: 2%; }
  .sim-pic-title { text-align: center; font-size: 32px; font-weight: 900; margin: 10px 0; letter-spacing: 2px; background: linear-gradient(90deg, #38bdf8, #818cf8, #22d3ee, #38bdf8); background-size: 300% 300%; animation: gradientMove 4s ease infinite; -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .sim-pic-subtitle { text-align: center; color: #94a3b8; margin-bottom: 20px; }
  #sim-status { text-align: center; font-weight: 800; color: #38bdf8; margin: 10px 0; }
  .sim-note { text-align: center; font-size: 12px; color: #c7d2fe; margin: 8px 0 20px; font-style: italic; }
  .section { margin-top: 30px; }
  .section h4 { text-transform: uppercase; font-weight: 900; letter-spacing: 2px; color: #a5b4fc; margin-bottom: 15px; }
  .data-table { width: 100%; border-collapse: collapse; border-radius: 16px; overflow: hidden; background: rgba(255,255,255,0.05); }
  .data-table th { background: rgba(255,255,255,0.1); padding: 14px; font-weight: 900; text-align: left; }
  .data-table td { padding: 14px; font-size: 15px; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.08); }
  .data-table tr:hover { background: rgba(56,189,248,0.12); transform: scale(1.01); transition: all 0.2s ease; }
  .data-table img { width: 90px; height: 120px; object-fit: cover; border-radius: 8px; border: 1px solid rgba(255,255,255,0.25); transition: transform 0.3s ease; cursor: pointer; }
  .data-table img:hover { transform: scale(1.15); z-index: 2; }
  .badge { padding: 4px 14px; border-radius: 20px; background: rgba(56,189,248,0.15); color: #7dd3fc; font-weight: 900; display: inline-block; }
  @media (max-width: 768px) {
    header strong { font-size: 16px; }
    .service-button { min-width: 150px; padding: 15px; font-size: 14px; }
    #login-form { width: 90%; padding: 20px; }
    .w3-half { width: 100%; margin-right: 0; margin-bottom: 10px; }
    .w3-button { font-size: 12px; padding: 6px 12px; }
    .sim-pic-title { font-size: 24px; }
  }
</style>
</head>
<body>
  <header>
    <strong>Faheem Tracker - All in One Power</strong>
    <a href="#" id="logout-link" class="w3-button w3-right w3-red">Logout</a>
    <a href="#" id="back-link" class="w3-button w3-right w3-black">Back</a>
  </header>

  <div id="login-container">
    <h2>Login Required</h2>
    <form id="login-form">
      <input type="text" id="username" placeholder="Username" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <div id="buttons-container" class="container">
    <h2 style="margin-bottom: 20px;">Select a Service</h2>
    <div class="w3-row-padding">
      <button class="service-button" data-service="sim-data" style="animation-delay: 0.1s;">SIM Data</button>
      <button class="service-button" data-service="patient-records" style="animation-delay: 0.2s;">Patient Records</button>
      <button class="service-button" data-service="vehicle-punjab" style="animation-delay: 0.3s;">Vehicle Punjab</button>
      <button class="service-button" data-service="vehicle-islamabad" style="animation-delay: 0.4s;">Vehicle Islamabad</button>
      <button class="service-button" data-service="fir-check-punjab" style="animation-delay: 0.5s;">FIR Check Punjab</button>
      <button class="service-button" data-service="cro-punjab" style="animation-delay: 0.6s;">CRO Punjab</button>
      <button class="service-button" data-service="cro-sindh" style="animation-delay: 0.7s;">CRO Sindh</button>
      <button class="service-button" data-service="cnic-to-fir" style="animation-delay: 0.8s;">CNIC to FIR</button>
      <button class="service-button" data-service="sindh-employees" style="animation-delay: 0.9s;">Sindh Employees</button>
      <button class="service-button" data-service="punjab-land" style="animation-delay: 1.0s;">Punjab Land</button>
      <button class="service-button" data-service="ajk-vehicle" style="animation-delay: 1.1s;">AJK Vehicle</button>
      <button class="service-button" data-service="domicile" style="animation-delay: 1.2s;">Domicile</button>
      <button class="service-button" data-service="kashmir-tree" style="animation-delay: 1.3s;">Kashmir Tree</button>
      <button class="service-button" data-service="fbr" style="animation-delay: 1.4s;">FBR</button>
      <button class="service-button" data-service="one-click" style="animation-delay: 1.5s;">All in One Data</button>
      <button class="service-button" data-service="fir-copy" style="animation-delay: 1.6s;">FIR Copy Search</button>
      <button class="service-button" data-service="sim-pic" style="animation-delay: 1.7s;">SIM and Pic Details</button>
    </div>
  </div>

  <div id="search-container">
    <h3 id="service-title">Service Title</h3>
    <p id="search-description" style="margin: 10px 0;">Search by CNIC</p>
    <form id="search-form" method="POST" target="result-frame">
      <input id="search-input" name="number" type="text" autocomplete="off" placeholder="Enter CNIC" required>
      <input type="hidden" name="userid" value="12">
      <button type="submit" class="submit-btn">Search</button>
      <p style="text-align: center; margin-top: 10px; color: #aaa;">Wait Some Seconds For Details</p>
    </form>
    <div class="result-area">
      <iframe name="result-frame" style="width:100%; height:400px; border:none;"></iframe>
    </div>
  </div>

  <div id="fir-copy-container">
    <h3>FIR Copy Search</h3>
    <p style="margin: 10px 0;">Find and download FIR PDF using official record.</p>
    <form id="firForm">
      <input type="hidden" id="userid" value="12">
      <div><label>FIR Number</label><input id="fir_no" name="fir_no" required placeholder="e.g. 123"></div>
      <div><label>Year</label><select id="year" name="year" required></select></div>
      <div><label>District</label><select id="district" name="district_id" required><option value="">Loading...</option></select></div>
      <div><label>Police Station</label><select id="ps_id" name="ps_id" required disabled><option value="">Select District First</option></select></div>
      <br>
      <button id="submitBtn" type="submit" class="submit-btn">Get FIR PDF</button>
    </form>
    <div id="pdfLinkBox"><a id="pdfLink" href="#" target="_blank">Open PDF</a></div>
  </div>

  <div id="sim-pic-container">
    <h3 class="sim-pic-title">SIM and Pic Details</h3>
    <div class="sim-pic-subtitle">Search by CNIC or Number</div>
    <div style="text-align: center; margin-bottom: 20px;">
      <input id="sim-query" type="text" placeholder="Enter CNIC or Number" style="width: 300px; display: inline-block;">
      <button onclick="searchSimPic()" class="submit-btn" style="width: auto; padding: 12px 30px; display: inline-block; margin-left: 10px;">Search</button>
    </div>
    <div id="sim-status">Idle</div>
    <div class="sim-note">Note: Some CNIC data not available but mostly available.<br>Mostly Lahore details available.<br>Mostly CNIC data available — rare chance to get details by number.</div>
    <div id="sim-output"></div>
  </div>

  <div id="overlay"><div id="loader"></div></div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<script>
  const validUsers = [{username:'faheem',password:'faheemakhtar@864'},{username:'ayan',password:'ayan7422'},{username:'sagar',password:'faheemakhtar@864'}];
  const services = {'sim-data':{url:'https://mahisite.xyz/user/API/search.php',title:'SIM Data',placeholder:'Enter CNIC Without Dashes And With Dashes (e.g., 36304-6485918-1) And Number With 0345...',maxlength:19,description:'Search by CNIC And Number'},'patient-records':{url:'https://mahisite.xyz/user/API/api-patient.php',title:'Patient Records',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'vehicle-punjab':{url:'https://mahisite.xyz/user/API/avlspunjab-search.php',title:'Vehicle Punjab',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'vehicle-islamabad':{url:'https://mahisite.xyz/user/API/avlsislamabad-search.php',title:'Vehicle Islamabad',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'fir-check-punjab':{url:'https://mahisite.xyz/user/API/api-fircheckpunjab.php',title:'FIR Check Punjab',placeholder:'Enter CNIC (with dashes)',maxlength:19,description:'Search by CNIC With Dashes'},'cro-punjab':{url:'https://mahisite.xyz/user/API/api-cropunjab.php',title:'CRO Punjab',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'cro-sindh':{url:'https://mahisite.xyz/user/API/api-crosindh.php',title:'CRO Sindh',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'cnic-to-fir':{url:'https://mahisite.xyz/user/API/cnic-to-fir.php',title:'CNIC to FIR',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'sindh-employees':{url:'https://mahisite.xyz/user/API/api-sindhemployees.php',title:'Sindh Employees',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'punjab-land':{url:'https://mahisite.xyz/user/API/api-punjabland.php',title:'Punjab Land',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'ajk-vehicle':{url:'https://mahisite.xyz/user/API/api-ajkvehicle.php',title:'AJK Vehicle',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'domicile':{url:'https://mahisite.xyz/user/API/api-domicile.php',title:'Domicile',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'kashmir-tree':{url:'https://mahisite.xyz/user/API/api-kashmirtree.php',title:'Kashmir Tree',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'},'fbr':{url:'https://mahisite.xyz/user/API/api-fbr.php',title:'FBR',placeholder:'Enter CNIC (17 digits)',maxlength:17,description:'Search by CNIC'},'one-click':{url:'https://mahisite.xyz/user/API/api-oneclick.php',title:'All in One Data',placeholder:'Enter CNIC',maxlength:19,description:'Search by CNIC'}};
  $(document).ready(function(){if(localStorage.getItem('loggedIn')==='true'){$('#login-container').hide();$('#buttons-container').show();$('#logout-link').show();}loadYears();});
  $('#login-form').on('submit',function(e){e.preventDefault();const username=$('#username').val();const password=$('#password').val();const user=validUsers.find(u=>u.username===username&&u.password===password);if(user){localStorage.setItem('loggedIn','true');$('#login-container').hide();$('#buttons-container').show();$('#logout-link').show();}else{alert('Invalid credentials');}});
  $('#logout-link').on('click',function(e){e.preventDefault();localStorage.removeItem('loggedIn');$('#buttons-container').hide();$('#search-container').hide();$('#fir-copy-container').hide();$('#sim-pic-container').hide();$('#back-link').hide();$('#logout-link').hide();$('#login-container').show();$('iframe[name="result-frame"]').attr('src','about:blank');});
  $('.service-button').on('click',function(){const service=$(this).data('service');if(service==='fir-copy'){$('#buttons-container').hide();$('#search-container').hide();$('#sim-pic-container').hide();$('#fir-copy-container').show();$('#back-link').show();loadDistricts();}else if(service==='sim-pic'){$('#buttons-container').hide();$('#search-container').hide();$('#fir-copy-container').hide();$('#sim-pic-container').show();$('#back-link').show();$('#sim-output').html('');$('#sim-status').text('Idle');}else{const config=services[service];$('#service-title').text(config.title);$('#search-description').text(config.description);$('#search-input').attr('placeholder',config.placeholder).attr('maxlength',config.maxlength).val('');$('#search-form').attr('action',config.url);$('iframe[name="result-frame"]').attr('src','about:blank');$('#buttons-container').hide();$('#fir-copy-container').hide();$('#sim-pic-container').hide();$('#search-container').show();$('#back-link').show();}});
  $('#back-link').on('click',function(e){e.preventDefault();$('#search-container').hide();$('#fir-copy-container').hide();$('#sim-pic-container').hide();$('#buttons-container').show();$('#back-link').hide();$('iframe[name="result-frame"]').attr('src','about:blank');$('#pdfLinkBox').hide();});
  const API_BASE='https://api.mahisite.xyz/fircopy/fir_api.php';
  function loadYears(){const yearSel=document.getElementById('year');if(!yearSel)return;const current=new Date().getFullYear();for(let y=current;y>=2000;y--){const opt=document.createElement('option');opt.value=y;opt.textContent=y;yearSel.appendChild(opt);}}
  async function loadDistricts(){try{const res=await fetch(`${API_BASE}?action=districts`);const data=await res.json();const list=data.districts_list||[];document.getElementById('district').innerHTML='<option value="">Select...</option>'+list.map(d=>`<option value="${d.district_id}">${d.district_name}</option>`).join('');}catch(e){document.getElementById('district').innerHTML='<option>Error loading</option>';}}
  async function loadPoliceStations(id){const ps=document.getElementById('ps_id');ps.disabled=true;ps.innerHTML='<option>Loading...</option>';try{const res=await fetch(`${API_BASE}?action=police_stations&district_id=${id}`);const data=await res.json();const list=data.data||[];ps.innerHTML='<option value="">Select...</option>'+list.map(p=>`<option value="${p.ps_id}">${p.ps_name_eng}</option>`).join('');ps.disabled=false;}catch(e){ps.innerHTML='<option>Error loading</option>';}}
  document.getElementById('district').addEventListener('change',e=>{const id=e.target.value;if(id)loadPoliceStations(id);else{const ps=document.getElementById('ps_id');ps.disabled=true;ps.innerHTML='<option>Select District First</option>';}});
  document.getElementById('firForm').addEventListener('submit',async e=>{e.preventDefault();const fd=new FormData(e.target);fd.append('action','fir_pdf');document.getElementById("overlay").style.display="flex";try{const res=await fetch(`${API_BASE}?action=fir_pdf`,{method:'POST',body:fd});const data=await res.json();if(data.pdf_link){document.getElementById('pdfLink').href=data.pdf_link;document.getElementById('pdfLinkBox').style.display='block';window.open(data.pdf_link,'_blank');}else{alert('No record found.');}}catch(err){alert('Error: '+err.message);}finally{document.getElementById("overlay").style.display="none";}});
  async function searchSimPic(){const query=document.getElementById('sim-query').value.trim();if(!query){alert('Enter CNIC or Number');return;}const status=document.getElementById('sim-status');status.textContent='Searching...';document.getElementById("overlay").style.display="flex";try{const isNumber=/^\d{10,13}$/.test(query);const response={cnic_data:null,sim_data:null,bill_data:null};const corsProxy='https://api.allorigins.win/raw?url=';try{const cnicUrl='https://traceverisys.com/cypher.php';const formData=new URLSearchParams();formData.append('query',query);const cnicRes=await fetch(corsProxy+encodeURIComponent(cnicUrl),{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:formData.toString()});if(cnicRes.ok){const text=await cnicRes.text();try{response.cnic_data=JSON.parse(text);}catch(e){console.log('CNIC data parse error');}}}catch(e){console.log('CNIC fetch error:',e);}if(isNumber){try{const simUrl='https://simdataupdates.com/wp-admin/admin-ajax.php?action=fetch_sim_data&term='+encodeURIComponent(query);const simRes=await fetch(corsProxy+encodeURIComponent(simUrl));if(simRes.ok){const text=await simRes.text();try{response.sim_data=JSON.parse(text);}catch(e){console.log('SIM data parse error');}}}catch(e){console.log('SIM fetch error:',e);}}status.textContent='Fetched ✅';renderSimPicData(response);}catch(err){status.textContent='Server error, try again';console.error(err);}finally{document.getElementById("overlay").style.display="none";}}
  function renderSimPicData(data){const output=document.getElementById('sim-output');output.innerHTML='';function formatValue(v,k){if(typeof v==='string'&&v.startsWith('data:image/'))return `<img src="${v}" alt="Image">`;if(/relationship/i.test(k))return `<span class="badge">${v}</span>`;if(/cnic|name|father|dob|date/i.test(k))return `<strong>${v}</strong>`;return v??'';}function createTable(title,arr){if(!Array.isArray(arr)||!arr.length)return;const cols=[...new Set(arr.flatMap(o=>Object.keys(o)))];let html=`<div class="section"><h4>${title}</h4><table class="data-table"><tr>`;cols.forEach(c=>html+=`<th>${c}</th>`);html+='</tr>';arr.forEach(r=>{html+='<tr>';cols.forEach(c=>html+=`<td>${formatValue(r[c],c)}</td>`);html+='</tr>';});html+='</table></div>';output.innerHTML+=html;}function walkData(title,value){if(Array.isArray(value))createTable(title,value);else if(value&&typeof value==='object')for(const k in value)walkData(`${title} → ${k}`,value[k]);}if(data.cnic_data){output.innerHTML+='<div class="section"><h4>CNIC Data</h4></div>';const cnicData=data.cnic_data['Lahore Cross Relation']||data.cnic_data;for(const k in cnicData)walkData(k,cnicData[k]);}if(data.sim_data){output.innerHTML+='<div class="section"><h4>SIM Data</h4></div>';for(const k in data.sim_data)walkData(k,data.sim_data[k]);}if(data.bill_data){output.innerHTML+='<div class="section"><h4>BILL Data</h4></div>';for(const k in data.bill_data)walkData(k,data.bill_data[k]);}if(!data.cnic_data&&!data.sim_data&&!data.bill_data)output.innerHTML='<p style="text-align:center;color:#aaa;">No data found</p>';}
</script>
</body>
</html>
